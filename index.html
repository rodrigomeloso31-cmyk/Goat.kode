<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Chamada Recebida</title>
    <style>
        body { margin: 0; background-color: #000; font-family: -apple-system, BlinkMacSystemFont, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; color: white; }
        .call-container { text-align: center; width: 100%; max-width: 350px; }
        .avatar { width: 130px; height: 130px; background-image: url('https://imgur.com/PoxJsyD.png'); background-size: cover; background-position: center; border-radius: 50%; margin: 0 auto 15px; border: 1px solid #333; }
        .name { font-size: 28px; font-weight: bold; }
        .device { font-size: 16px; opacity: 0.6; margin-bottom: 70px; }
        .buttons { display: flex; justify-content: space-around; padding: 0 20px; }
        .btn-wrapper { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .btn { width: 75px; height: 75px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; border: none; }
        .recusar { background-color: #ff3b30; font-size: 35px; color: white; }
        .aceitar { background-color: #4cd964; }
        .shake { animation: shake 0.5s infinite; }
        @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(2deg); } 75% { transform: rotate(-2deg); } 100% { transform: rotate(0deg); } }
    </style>
</head>
<body>

<audio id="ringtone" loop preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-phone-ring-1356.mp3" type="audio/mpeg">
</audio>

<div class="call-container shake" id="main-content">
  <div class="avatar"></div>
  <div class="name">@agente.codee</div>
  <div class="device">iPhone</div>

  <div class="buttons">
    <div class="btn-wrapper">
      <button class="btn recusar" onclick="recusar()">Ã—</button>
      <span>Recusar</span>
    </div>

    <div class="btn-wrapper">
      <a href="https://hotm.io/Protgoat" target="_top" class="btn aceitar" id="btn-atender" style="text-decoration: none;">
        <svg viewBox="0 0 24 24" width="35"><path d="M6.62 10.79a15.1 15.1 0 006.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" fill="white"/></svg>
      </a>
      <span>Atender</span>
    </div>
  </div>
</div>

<script>
document.addEventListener('touchstart', function() {
    const ringtone = document.getElementById('ringtone');
    if(ringtone) ringtone.play().catch(() => {});
}, { once: true });

function recusar() {
    const ringtone = document.getElementById('ringtone');
    if(ringtone) { ringtone.pause(); ringtone.currentTime = 0; }
    document.getElementById('main-content').classList.remove('shake');
    document.getElementById('main-content').innerHTML = `
        <div style="margin-top: 100px;">
            <h1 style="font-size: 32px;">Linha Ocupada</h1>
            <p style="opacity: 0.7;">O protocolo foi encerrado.</p>
            <button onclick="location.reload()" style="margin-top: 20px; background: #333; color: white; border: none; padding: 10px 20px; border-radius: 20px;">Tentar novamente</button>
        </div>`;
}
</script>
</body>
</html>
